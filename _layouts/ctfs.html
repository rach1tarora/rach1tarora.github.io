---
layout: compress
---

{% include head.html %}

<main>

    {% include header.html %}

    {{ content }}

    {% assign total_blood = 0 %}
    {% for post in site.posts %}
    {% if post.tags contains 'ctf' and post.blood_count %}
    {% assign total_blood = total_blood | plus: post.blood_count %}
    {% endif %}
    {% endfor %}

    <div style="position: fixed; top: 20px; right: 20px; background-color: rgba(0, 0, 0, 0.8); padding: 10px 15px; border-radius: 5px; border: 1px solid #3a3a3a;">
        <strong>Blood Count:</strong> ðŸ©¸ {{ total_blood }}
    </div>

    <div class="search-container" style="margin: 20px 0;">
        <input type="text" id="ctf-search" placeholder="Search CTF writeups..." style="width: 100%; padding: 10px; font-size: 16px; background-color: inherit; color: inherit; border: 1px dashed; border-radius: 4px;">
    </div>

    <ul class="blog-posts" id="ctf-posts-list">
        {% for post in site.posts %}
        {% if post.tags contains 'ctf' %}
        {% assign post_content = post.content | strip_html | strip_newlines | downcase %}
        <li data-title="{{ post.title | downcase | escape }}" data-content="{{ post_content | escape }}" data-date="{{ post.date | date: '%b %-d, %Y' }}">
            <span>
                <i>
                    <time datetime="{{ post.date | date: '%Y-%m-%d' }}" pubdate="">
                        {{ post.date | date: "%b %-d, %Y" }}
                    </time>
                </i>
            </span>
            <a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }} ðŸ©¸</a>
        </li>
        {% endif %}
        {% endfor %}
    </ul>

    <div id="no-results" style="display: none; margin-top: 20px; color: #888; font-style: italic;">
        No CTF writeups found matching your search.
    </div>

</main>

{% include footer.html %}

<script type="text/javascript">
(function() {
    'use strict';
    
    function initCTFSearch() {
        var searchInput = document.getElementById('ctf-search');
        var postsList = document.getElementById('ctf-posts-list');
        var noResults = document.getElementById('no-results');
        
        if (!searchInput || !postsList) {
            return;
        }
        
        var posts = Array.prototype.slice.call(postsList.querySelectorAll('li'));

        function performSearch() {
            var searchTerm = (searchInput.value || '').toLowerCase().trim();
            var hasResults = false;

            if (searchTerm === '') {
                posts.forEach(function(post) {
                    post.style.display = 'flex';
                });
                if (noResults) noResults.style.display = 'none';
                return;
            }

            posts.forEach(function(post) {
                var title = (post.getAttribute('data-title') || '').toLowerCase();
                var content = (post.getAttribute('data-content') || '').toLowerCase();
                
                if (title.indexOf(searchTerm) !== -1 || content.indexOf(searchTerm) !== -1) {
                    post.style.display = 'flex';
                    hasResults = true;
                } else {
                    post.style.display = 'none';
                }
            });

            if (hasResults) {
                if (noResults) noResults.style.display = 'none';
            } else {
                if (noResults) noResults.style.display = 'block';
            }
        }

        searchInput.addEventListener('input', performSearch);
        searchInput.addEventListener('keyup', performSearch);
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCTFSearch);
    } else {
        initCTFSearch();
    }
})();
</script>

</body>

</html>
